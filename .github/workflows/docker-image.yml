name: Docker-Qemu deploy

on: [push] 

jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest
    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:

    - name: Docker Setup QEMU
  # You may pin to the exact commit or the version.
      uses: docker/setup-qemu-action@27d0a4f181a40b142cce983c5393082c365d1480
      with:
    # QEMU static binaries Docker image (e.g. tonistiigi/binfmt:latest)
       image: tonistiigi/binfmt:latest
    # Platforms to install (e.g. arm64,riscv64,arm)
       platforms: arm64
       
    - name: Docker Build Image
      uses: docker/build-push-action@v2
      with:
        context: ..
        file: ./Dockerfile
        run: docker build -f Dockerfile -t pyimage ..
        path: true
